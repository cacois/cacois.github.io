<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>Codehenge - Who built it, and why? A blog about software, technology, and more</title>
    <meta name="description" content="Codehenge" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <!-- Customisation  -->
    <link rel="stylesheet" type="text/css" href="/assets/css/main.css" />
    <link rel="stylesheet" href="/pygments.css">

</head>
<body class="post-template">

    <header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        <a class="back-button icon-arrow-left" href="/ ">Home</a>
        <a class="subscribe-button icon-feed" href="/rss.xml">Subscribe</a>
    </nav>
</header>

<main class="content" role="main">

    <article class="post">

        <header class="post-header">
            <h1 class="post-title">Android Development Tutorial - A Simple Twitter Feed Reader</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2011-05-30">30 May 2011</time>
                
                    on android and programming
                
            </section>
        </header>

<!--         <header class="post-header">
            <a id="blog-logo" href="blog url">
                
                    <img src="true" alt="Codehenge" />
                
            </a>
        </header> -->

        <!-- <span class="post-meta">
            <time datetime="2011-05-30">30 May 2011</time>
            
                on android and programming
            
        </span> -->

        <!-- <h1 class="post-title">Android Development Tutorial - A Simple Twitter Feed Reader</h1> -->

        <section class="post-content">
            <div style="float:left;margin:0 10px 5px 0;">
<p><figure><img src='/assets/twitter-android.jpg' alt='' width='150' height='150'/><figcaption><a href="http://codehenge.net/blog/2011/05/customizing-android-listview-item-layout/"</figcaption></figure><p>Last week I demonstrated designing and implementing customized layouts for Android ListView items, including some simple example code. This time around I'd like to expand on that code to make something a little closer to an actual app, illustrating some new tools and concepts in the process such as working with JSON data and the Android BitmapFactory.</p>
<p>In this post I'll show you how to implement a Twitter feed reader for Android. Let's start by familiarizing ourselves with the <a href="http://dev.twitter.com/doc/get/search">Twitter Search API</a> Say we wanted to see what Twitter users have to say about Android today. A Twitter API search query would look something like:</p>
<p><a href="http://search.twitter.com/search.json?q=@android" target="_blank">http://search.twitter.com/search.json?q=@android</a></p>
<p>Twitter's Search API allows up to 100 results to be returned per query, which is more than enough for our example today, but which introduces some interesting challenges as we want to display more data in a user-friendly fashion - more on that later. For today's purposes, I'll restrict return data to 25 results, using the following query:</p>
<p><a href="http://search.twitter.com/search.json?q=@android&rpp=25&page=1" target="_blank">http://search.twitter.com/search.json?q=@android&amp;rpp=25&amp;page=1</a></p>
<p>The "page" parameter can be incremented to step through chunks of 25 results in sequential queries. Go ahead and click on that link (will open a new window/tab) to check out the JSON data returned. There's a lot of data values in there, but for simplicity we'll be focusing on the following values:</p>
<ul>
<li>from_user</li>
<li>text</li>
<li>profile_image_url</li>
</ul>
<p>I'll expand the simple example app from my <a href="http://codehenge.net/blog/2011/05/customizing-android-listview-item-layout/">last post</a> to display twitter posts instead of a hard-coded list of users. The layout from the previous tutorial can be easily repurposed by changing the icon to the Twitter user's avatar, placing the twitter username in the "username" field, and placing the tweet in the message field. Our goal is something like:</p>
<p><figure><img src='/assets/Screen-shot-2011-05-30-at-10.48.03-AM-191x300.png' alt='' width='191' height='300'/><figcaption></a></p></figcaption></figure><p>So how do we get there? Let's go through it, step by step. First, we edit the listitem.xml file to give the View components more helpful names/IDs:</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;linearlayout</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span> <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span> <span class="na">android:gravity=</span><span class="s">&quot;left|center&quot;</span> <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span> <span class="na">android:paddingbottom=</span><span class="s">&quot;5px&quot;</span> <span class="na">android:paddingtop=</span><span class="s">&quot;5px&quot;</span> <span class="na">android:paddingleft=</span><span class="s">&quot;5px&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;imageview</span> <span class="na">android:id=</span><span class="s">&quot;@+id/avatar&quot;</span> <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span> <span class="na">android:layout_height=</span><span class="s">&quot;fill_parent&quot;</span> <span class="na">android:layout_marginright=</span><span class="s">&quot;6dip&quot;</span> <span class="na">android:src=</span><span class="s">&quot;@drawable/icon&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;linearlayout</span> <span class="na">android:orientation=</span><span class="s">&quot;vertical&quot;</span> <span class="na">android:layout_width=</span><span class="s">&quot;0dip&quot;</span> <span class="na">android:layout_weight=</span><span class="s">&quot;1&quot;</span> <span class="na">android:layout_height=</span><span class="s">&quot;fill_parent&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;textview</span> <span class="na">android:id=</span><span class="s">&quot;@+id/username&quot;</span> <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span> <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span> <span class="na">android:gravity=</span><span class="s">&quot;center&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;textview</span> <span class="na">android:id=</span><span class="s">&quot;@+id/message&quot;</span> <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span> <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span> <span class="na">android:layout_marginleft=</span><span class="s">&quot;10px&quot;</span> <span class="na">android:textcolor=</span><span class="s">&quot;#0099CC&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/linearlayout&gt;</span>
<span class="nt">&lt;/linearlayout&gt;</span></code></pre></div>
</div>
<p>We can keep the main.xml from the previous post, since all we are changing is the layout within each item. Now we need some workhorse code to manage calling the Twitter API and formatting the return data for easy use. Let's wrap our returned tweets in a simple Tweet class:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Tweet</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="n">username</span><span class="o">;</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="n">message</span><span class="o">;</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="n">image_url</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Tweet</span><span class="o">(</span><span class="n">String</span> <span class="n">username</span><span class="o">,</span> <span class="n">String</span> <span class="n">message</span><span class="o">,</span> <span class="n">String</span> <span class="n">url</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">username</span> <span class="o">=</span> <span class="n">username</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">image_url</span> <span class="o">=</span> <span class="n">url</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></div></div>
<p>I've also written a simple getTweets(searchTerm, page) method to generate the API call and process the return data into our Tweet objects. Here goes:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Tweet</span><span class="o">&gt;</span> <span class="nf">getTweets</span><span class="o">(</span><span class="n">String</span> <span class="n">searchTerm</span><span class="o">,</span> <span class="kt">int</span> <span class="n">page</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">String</span> <span class="n">searchUrl</span> <span class="o">=</span>
        <span class="s">&quot;http://search.twitter.com/search.json?q=@&quot;</span>
        <span class="o">+</span> <span class="n">searchTerm</span> <span class="o">+</span> <span class="s">&quot;&amp;rpp=100&amp;page=&quot;</span> <span class="o">+</span> <span class="n">page</span><span class="o">;</span>
  <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">tweet</span><span class="o">&gt;</span> <span class="n">tweets</span> <span class="o">=</span>
        <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">tweet</span><span class="o">&gt;();</span>
  <span class="n">HttpClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span>  <span class="nf">DefaultHttpClient</span><span class="o">();</span>
  <span class="n">HttpGet</span> <span class="n">get</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">HttpGet</span><span class="o">(</span><span class="n">searchUrl</span><span class="o">);</span>
  <span class="n">ResponseHandler</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">responseHandler</span> <span class="o">=</span>
        <span class="k">new</span> <span class="nf">BasicResponseHandler</span><span class="o">();</span>
  <span class="n">String</span> <span class="n">responseBody</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="k">try</span> <span class="o">{</span>
    <span class="n">responseBody</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">get</span><span class="o">,</span> <span class="n">responseHandler</span><span class="o">);</span>
  <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ex</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
  <span class="o">}</span>
  <span class="n">JSONObject</span> <span class="n">jsonObject</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="n">JSONParser</span> <span class="n">parser</span><span class="o">=</span><span class="k">new</span> <span class="nf">JSONParser</span><span class="o">();</span>
  <span class="k">try</span> <span class="o">{</span>
    <span class="n">Object</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">responseBody</span><span class="o">);</span>
    <span class="n">jsonObject</span><span class="o">=(</span><span class="n">JSONObject</span><span class="o">)</span><span class="n">obj</span><span class="o">;</span>
  <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">){</span>
    <span class="n">Log</span><span class="o">.</span><span class="na">v</span><span class="o">(</span><span class="s">&quot;TEST&quot;</span><span class="o">,</span><span class="s">&quot;Exception: &quot;</span> <span class="o">+</span> <span class="n">ex</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
  <span class="o">}</span>
  <span class="n">JSONArray</span> <span class="n">arr</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="k">try</span> <span class="o">{</span>
    <span class="n">Object</span> <span class="n">j</span> <span class="o">=</span> <span class="n">jsonObject</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;results&quot;</span><span class="o">);</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="o">(</span><span class="n">JSONArray</span><span class="o">)</span><span class="n">j</span><span class="o">;</span>
  <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">){</span>
    <span class="n">Log</span><span class="o">.</span><span class="na">v</span><span class="o">(</span><span class="s">&quot;TEST&quot;</span><span class="o">,</span><span class="s">&quot;Exception: &quot;</span> <span class="o">+</span> <span class="n">ex</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
  <span class="o">}</span>
  <span class="k">for</span><span class="o">(</span><span class="n">Object</span> <span class="n">t</span> <span class="o">:</span> <span class="n">arr</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Tweet</span> <span class="n">tweet</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Tweet</span><span class="o">(</span>
      <span class="o">((</span><span class="n">JSONObject</span><span class="o">)</span><span class="n">t</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;from_user&quot;</span><span class="o">).</span><span class="na">toString</span><span class="o">(),</span>
      <span class="o">((</span><span class="n">JSONObject</span><span class="o">)</span><span class="n">t</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;text&quot;</span><span class="o">).</span><span class="na">toString</span><span class="o">(),</span>
      <span class="o">((</span><span class="n">JSONObject</span><span class="o">)</span><span class="n">t</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;profile_image_url&quot;</span><span class="o">).</span><span class="na">toString</span><span class="o">()</span>
    <span class="o">);</span>
    <span class="n">tweets</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">tweet</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">tweets</span><span class="o">;</span>
<span class="o">}</span></code></pre></div></div>
<p>The code above is using the <a href="http://code.google.com/p/json-simple/">json-simple library</a>, a nice lightweight tool for JSON encoding and decoding. I don't have time now, but I may do some demos/examples using json-simple in a later post if there is interest. Aside from exception handling, all the code above does is formats the Twitter search request url from the input parameters "searchTerm" and "page", makes an HTTP GET request using the generate url, parses the JSON return value, and stuffs the data into Tweet objects.</p>
<p>Notice that the Twitter user avatar data (profile_image_url) returned is simply a url to the user's avatar. We need one more processing step to get the actual image, since Android ImageViews can't display an image directly from the web without downloading it. (good thing too, or offline usage would be quite dull!) Let's see how few lines we can do this in:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="n">Bitmap</span> <span class="nf">getBitmap</span><span class="o">(</span><span class="n">String</span> <span class="n">bitmapUrl</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">try</span> <span class="o">{</span>
    <span class="n">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">URL</span><span class="o">(</span><span class="n">bitmapUrl</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">BitmapFactory</span><span class="o">.</span><span class="na">decodeStream</span><span class="o">(</span><span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">().</span><span class="na">getInputStream</span><span class="o">());</span>
  <span class="o">}</span>
  <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span><span class="k">return</span> <span class="kc">null</span><span class="o">;}</span>
<span class="o">}</span></code></pre></div></div>
<p>May not break any records, but the code above is fairly compact. It uses another handy Android API tool called the BitmapFactory. The BitmapFactory lives and breathes bitmaps, its sole purpose in life being to return a bitmap from whatever source data you give it. File, filestream, byte array, you name it. Because of this, I don't have to put any thought at all into bits, bytes, files, http requests, or anything else to accomplish this task. Rock on, BitmapFactory.</p>
<p>Now we have all of the tools we need to refactor the ItemAdapter from last week's post to display our Tweet objects. Here we go:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TweetItemAdapter</span> <span class="kd">extends</span> <span class="n">ArrayAdapter</span><span class="o">&lt;</span><span class="n">tweet</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">tweet</span><span class="o">&gt;</span> <span class="n">tweets</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">TweetItemAdapter</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="kt">int</span> <span class="n">textViewResourceId</span><span class="o">,</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">tweet</span><span class="o">&gt;</span> <span class="n">tweets</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">textViewResourceId</span><span class="o">,</span> <span class="n">tweets</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">tweets</span> <span class="o">=</span> <span class="n">tweets</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">View</span> <span class="nf">getView</span><span class="o">(</span><span class="kt">int</span> <span class="n">position</span><span class="o">,</span> <span class="n">View</span> <span class="n">convertView</span><span class="o">,</span> <span class="n">ViewGroup</span> <span class="n">parent</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">View</span> <span class="n">v</span> <span class="o">=</span> <span class="n">convertView</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">v</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">LayoutInflater</span> <span class="n">vi</span> <span class="o">=</span>
         <span class="o">(</span><span class="n">LayoutInflater</span><span class="o">)</span><span class="n">getSystemService</span><span class="o">(</span><span class="n">Context</span><span class="o">.</span><span class="na">LAYOUT_INFLATER_SERVICE</span><span class="o">);</span>
      <span class="n">v</span> <span class="o">=</span> <span class="n">vi</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">listitem</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">Tweet</span> <span class="n">tweet</span> <span class="o">=</span> <span class="n">tweets</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">position</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">tweet</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">TextView</span> <span class="n">username</span> <span class="o">=</span> <span class="o">(</span><span class="n">TextView</span><span class="o">)</span> <span class="n">v</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">username</span><span class="o">);</span>
      <span class="n">TextView</span> <span class="n">message</span> <span class="o">=</span> <span class="o">(</span><span class="n">TextView</span><span class="o">)</span> <span class="n">v</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">message</span><span class="o">);</span>
      <span class="n">ImageView</span> <span class="n">image</span> <span class="o">=</span> <span class="o">(</span><span class="n">ImageView</span><span class="o">)</span> <span class="n">v</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">avatar</span><span class="o">);</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">username</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">username</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">tweet</span><span class="o">.</span><span class="na">username</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="k">if</span><span class="o">(</span><span class="n">message</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">message</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">tweet</span><span class="o">.</span><span class="na">message</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="k">if</span><span class="o">(</span><span class="n">image</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">image</span><span class="o">.</span><span class="na">setImageBitmap</span><span class="o">(</span><span class="n">getBitmap</span><span class="o">(</span><span class="n">tweet</span><span class="o">.</span><span class="na">image_url</span><span class="o">));</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">v</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></div></div>
<p>Not too many changes from the original, but the changes we have made are important. Let's go through them. No conceptual changes in the constructor, so I'll skip that. getView() is where the magic happens. Now, since we are setting the avatar image independently for each user, we are grabbing an ImageView object as well as two TextView objects from our View. Since we already parsed the Twitter JSON data in the getTweets() method and packaged it nicely into our Tweet objects, all we need to do here is put the extracted values from the relevant Tweet object into the text field for our TextView objects. For the ImageView, we need to set a bitmap value, which is exactly what we wrote the getBitmap(url) method to return. That's it!</p>
<p>For the sake of completeness, here is the onCreate() method for this example - this illustrates setting the adapter and passing some data to the ListView as our app is launched.</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
  <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
  <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">main</span><span class="o">);</span>
  <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">tweet</span><span class="o">&gt;</span> <span class="n">tweets</span> <span class="o">=</span> <span class="n">getTweets</span><span class="o">(</span><span class="s">&quot;android&quot;</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
  <span class="n">ListView</span> <span class="n">listView</span> <span class="o">=</span> <span class="o">(</span><span class="n">ListView</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">ListViewId</span><span class="o">);</span>
  <span class="n">listView</span><span class="o">.</span><span class="na">setAdapter</span><span class="o">(</span><span class="k">new</span> <span class="nf">TweetItemAdapter</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">listitem</span><span class="o">,</span> <span class="n">tweets</span><span class="o">));</span>
<span class="o">}</span></code></pre></div>
</div>
<p>For this example, we only ever get a single API call's worth of data, a limitation I will address in a follow-up tutorial. Let's take a screenshot of the finished product for posterity:</p>
<p><figure><img src='/assets/Screen-shot-2011-05-30-at-11.38.04-AM-180x300.png' alt='' width='180' height='300'/><figcaption></a></p></figcaption></figure><p>There you have it: a working Twitter feed reader, based on the Twitter search API. There are plenty of directions you could take this code, from allowing the user to specify search terms to changing the way data is aggregated or adding some persistent data features. If these are the types of things you are interested in, I hope this tutorial helps! Feel free to leave a comment or drop me a line if you have any questions. As always, you can download code using the links at the bottom of this post to try things out for yourself.</p>
<p>In my next post I'll continue working on this Twitter app to add user scrolling detection and auto-expansion of the ListView, so we can continually add to the ListView as the user scrolls through. This is a handy trick that can be useful in many scenarios. Stay tuned!</p>
<p><a href="/assets/downloads/Example1.java">Example.java</a> <a href="/assets/downloads/listitem1.xml">listitem.xml</a> <a href="/assets/downloads/main1.xml">main.xml</a></p>
<p><strong>Get 50% off my Node.js course <a href="http://www.udemy.com/learn-nodejs-by-example/?couponCode=codehenge">here</a></strong></p>
<p>If you liked this article, help me out by sharing a 50% discount to my Node.js course here: <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.udemy.com/learn-nodejs-by-example/?couponCode=codehenge" data-text="Sign up for Learn Node.js by Example now and get 50% off!" data-via="AaronCois" data-size="large" data-hashtags="nodejs">Tweet</a> Thanks!</p>
<p>You should follow me on Twitter here: <a href="https://twitter.com/AaronCois" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @AaronCois</a></p>

        </section>

        

        <footer class="post-footer">
            <!-- If we want to display author's name and bio -->
            
                <figure class="author-image">
                    <a class="img" href="/ " style="background-image: url(/assets/images/profile2.jpg)">
                    <span class="hidden">Constantine Aaron Cois's Picture</span></a>
                </figure>
                <section class="author">
                    <!-- Author Name -->
                    <h4> Constantine Aaron Cois </h4>
                    <!-- Author Bio -->
                    <p>
                         I code, I teach, I write. Want to know more <a href='/about.html'> about me? </a> 
                    </p>
                </section>
            

            <!-- Share links section -->
            <section class="share">
    <h4>Share this post</h4>
    <a class="icon-twitter" href="http://twitter.com/share?text=Android Development Tutorial - A Simple Twitter Feed Reader&amp;url=http://www.codehenge.net/2011/05/30/android-programming-tutorial-a-simple-twitter-feed-reader/"
        onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://www.codehenge.net/2011/05/30/android-programming-tutorial-a-simple-twitter-feed-reader/"
        onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
    </a>
    <a class="icon-google-plus" href="https://plus.google.com/share?url=http://www.codehenge.net/2011/05/30/android-programming-tutorial-a-simple-twitter-feed-reader/"
       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">Google+</span>
    </a>
</section>

            <!-- Disqus comments -->
            

        </footer>

    </article>

</main>

    <footer class="site-footer clearfix">
      <section class="copyright">
        <a href="/">Codehenge</a> &copy;
               &bull; All rights reserved.
      </section>
      <section class="poweredby">Made with Jekyll using
        <a href="http://github.com/rosario/kasper">Kasper theme</a>
      </section>
    </footer>

    <script type="text/javascript" src="/assets/js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/assets/js/index.js"></script>

    <!-- Google Analytics Tracking code -->
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-XXXXXXXX-X']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
</body>
</html>
